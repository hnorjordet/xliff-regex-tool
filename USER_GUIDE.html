<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XLIFF RegEx Tool - User Guide</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #ffffff;
            --text-color: #1f2937;
            --border-color: #e5e7eb;
            --code-bg: #f3f4f6;
            --link-color: #1d4ed8;
            --heading-color: #111827;
            --warning-bg: #fef3c7;
            --warning-border: #f59e0b;
            --success-bg: #d1fae5;
            --success-border: #10b981;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: var(--bg-color);
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        h1, h2, h3, h4 {
            color: var(--heading-color);
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        h1 {
            font-size: 2.5rem;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-top: 0;
        }

        h2 {
            font-size: 2rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.5rem;
        }

        h4 {
            font-size: 1.25rem;
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: var(--link-color);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
            font-size: 0.9em;
        }

        pre {
            background: var(--code-bg);
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1rem 0;
            border: 1px solid var(--border-color);
        }

        pre code {
            background: none;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background: var(--code-bg);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9fafb;
        }

        ul, ol {
            margin: 1rem 0 1rem 2rem;
        }

        li {
            margin: 0.5rem 0;
        }

        blockquote {
            border-left: 4px solid var(--warning-border);
            background: var(--warning-bg);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        blockquote p {
            margin: 0;
        }

        .toc {
            background: var(--code-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .toc h2 {
            margin-top: 0;
            border: none;
            font-size: 1.5rem;
        }

        .toc ul {
            margin-left: 1rem;
        }

        .toc a {
            color: var(--text-color);
        }

        .toc a:hover {
            color: var(--primary-color);
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .status-supported {
            background: var(--success-bg);
            color: var(--success-border);
        }

        .status-beta {
            background: var(--warning-bg);
            color: var(--warning-border);
        }

        .example-box {
            background: #eff6ff;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .example-box h4 {
            margin-top: 0;
            color: var(--primary-color);
        }

        kbd {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 3px;
            padding: 0.2rem 0.5rem;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.9em;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        hr {
            border: none;
            border-top: 2px solid var(--border-color);
            margin: 2rem 0;
        }

        .version-info {
            background: var(--code-bg);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            table {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <h1>XLIFF RegEx Tool - User Guide</h1>

    <div class="version-info">
        <strong>Version:</strong> 0.4.0 | <strong>Author:</strong> HÃ¥vard NÃ¸rjordet
    </div>

    <blockquote>
        <p><strong>âš ï¸ Beta Software Notice</strong><br>
        This is beta software shared between colleagues for testing. The tool has been tested with various XLIFF formats including SDLXLIFF files with sub-segmentation. Feedback is welcome! Report issues to HÃ¥vard.</p>
    </blockquote>

    <div class="toc">
        <h2>Table of Contents</h2>
        <ol>
            <li><a href="#quick-start">Quick Start</a></li>
            <li><a href="#supported-formats">Supported File Formats</a></li>
            <li><a href="#interface">Interface Guide</a></li>
            <li><a href="#search-replace">Search & Replace</a></li>
            <li><a href="#regex-guide">Regex Guide</a></li>
            <li><a href="#pattern-library">Pattern Library</a></li>
            <li><a href="#batch-checks">Batch Checks & ICU Validation</a></li>
            <li><a href="#shortcuts">Keyboard Shortcuts</a></li>
            <li><a href="#known-issues">Known Issues & Limitations</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="#faq">FAQ</a></li>
        </ol>
    </div>

    <h2 id="quick-start">Quick Start</h2>

    <h3>Opening Your First XLIFF File</h3>
    <p>There are two ways to open an XLIFF file:</p>
    <ol>
        <li><strong>Drag and Drop</strong>: Simply drag an XLIFF file from Finder onto the application window</li>
        <li><strong>File Picker</strong>: Click <strong>File â†’ Open XLIFF</strong> in the menu bar (or press <kbd>Cmd+O</kbd>)</li>
    </ol>
    <p>Supported file extensions: <code>.xliff</code>, <code>.xlf</code>, <code>.mxliff</code>, <code>.mqxliff</code>, <code>.sdlxliff</code></p>

    <h3>Basic Workflow</h3>
    <ol>
        <li><strong>Open file</strong>: Use File â†’ Open or drag-and-drop</li>
        <li><strong>View segments</strong>: Browse through the translation units in the table</li>
        <li><strong>Search</strong>: Enter a search pattern in the "Search for" field</li>
        <li><strong>Replace</strong>: Enter replacement text in the "Replace with" field</li>
        <li><strong>Preview</strong>: Click "Search" to highlight matches in yellow</li>
        <li><strong>Apply</strong>: Click "Replace in All Matches" to apply changes</li>
        <li><strong>Save</strong>: Use File â†’ Save (or <kbd>Cmd+S</kbd>) to save your changes</li>
    </ol>

    <h3>First-Time User Tips</h3>
    <ul>
        <li><strong>Dark Mode</strong>: Toggle with the moon icon (ğŸŒ™) in the top-right toolbar</li>
        <li><strong>Hidden Characters</strong>: Click the paragraph icon (Â¶) to show/hide spaces, tabs, and line breaks</li>
        <li><strong>Jump to Segment</strong>: Use the "Jump to segment" field to quickly navigate to a specific segment number</li>
        <li><strong>Segment Editing</strong>: Click on any row to open the editor panel at the bottom</li>
        <li><strong>Navigation</strong>: Use <kbd>Cmd+â†‘</kbd> to jump to the first segment, <kbd>Cmd+â†“</kbd> for the last segment</li>
    </ul>

    <hr>

    <h2 id="supported-formats">Supported File Formats</h2>

    <h3>XLIFF 1.2/2.0 (Standard) <span class="status-badge status-supported">âœ… Fully supported</span></h3>
    <p><strong>Extensions:</strong> <code>.xliff</code>, <code>.xlf</code></p>
    <p>Standard XLIFF files work perfectly. All translation units are parsed correctly, and tags are preserved during find/replace operations.</p>
    <p><strong>What works:</strong></p>
    <ul>
        <li>All <code>&lt;trans-unit&gt;</code> elements parsed</li>
        <li>Source and target segments extracted</li>
        <li>Tags preserved during editing</li>
        <li>Full regex support</li>
    </ul>

    <h3>MQXLIFF (memoQ) <span class="status-badge status-supported">âœ… Fully tested</span></h3>
    <p><strong>Extension:</strong> <code>.mqxliff</code></p>
    <p>MemoQ XLIFF files are fully supported and have been extensively tested.</p>

    <h3>MXLIFF (Phrase) <span class="status-badge status-supported">âœ… Working</span></h3>
    <p><strong>Extension:</strong> <code>.mxliff</code></p>
    <p>Phrase MXLIFF files work well. Segment numbers are automatically converted from 0-indexed to 1-indexed for display.</p>

    <h3>SDLXLIFF (SDL Trados Studio) <span class="status-badge status-supported">âœ… Working</span></h3>
    <p><strong>Extension:</strong> <code>.sdlxliff</code></p>
    <p>SDLXLIFF files from SDL Trados Studio are now fully supported, including files with sub-segmentation.</p>

    <blockquote>
        <p><strong>Sub-Segmentation Support:</strong> The tool correctly handles SDLXLIFF files that use <code>&lt;mrk mtype="seg"&gt;</code> tags for sub-segmentation. Each sub-segment is treated as an independent translation unit, matching the behavior in memoQ and other CAT tools.</p>
        <ul>
            <li><strong>Example:</strong> A trans-unit containing 3 sentences split by <code>&lt;mrk&gt;</code> tags will display as 3 separate segments</li>
            <li><strong>Segment IDs:</strong> Uses the <code>mid</code> attribute from <code>&lt;mrk&gt;</code> tags as segment identifiers</li>
            <li><strong>Note:</strong> Changes are saved back to the original file structure, preserving all SDLXLIFF-specific metadata</li>
        </ul>
    </blockquote>

    <hr>

    <h2 id="interface">Interface Guide</h2>

    <h3>Main Window Layout</h3>
    <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File  View  Insert  Help                    Â¶  ğŸŒ™  âš™ï¸  â”‚  â† Menu bar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Statistics:  Total: 60  Translated: 45  Untrans: 15    â”‚  â† Stats bar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search for: [regex pattern]         [Search]           â”‚
â”‚ Replace with: [replacement]  [Replace in All Matches]  â”‚  â† Search panel
â”‚ â˜‘ Use RegEx  â˜‘ Case Sensitive  â˜‘ Protect Tags          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Jump: [42] [Go]     Search in: â—‹ Target â—‹ Source â—‹ Bothâ”‚  â† Navigation
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #  â”‚ Source                    â”‚ Target                 â”‚
â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â† Segment table
â”‚ 1  â”‚ Hello world               â”‚ Hei verden             â”‚
â”‚ 2  â”‚ Welcome to the app        â”‚ Velkommen til appen    â”‚
â”‚ ...â”‚                            â”‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Editor Panel (appears when clicking a segment)         â”‚  â† Editor (bottom)
â”‚ Segment 1                                               â”‚
â”‚ Source: Hello world                                     â”‚
â”‚ Target: [Hei verden_________]  [Save] [Cancel]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </pre>

    <hr>

    <h2 id="search-replace">Search & Replace</h2>

    <h3>Basic Search</h3>
    <ol>
        <li>Enter text in "Search for" field</li>
        <li>Click "Search" button</li>
        <li>Matches are highlighted in yellow in the table</li>
    </ol>
    <p><strong>Options:</strong></p>
    <ul>
        <li><strong>Search in</strong>: Choose Target (default), Source, or Both</li>
        <li><strong>Case Sensitive</strong>: Match exact case</li>
        <li><strong>Use RegEx</strong>: Enable regular expressions</li>
    </ul>

    <h3>Dual Search (Source AND Target)</h3>
    <p>When you select <strong>Both</strong> in "Search in", you can use <strong>separate search patterns</strong> for source and target:</p>

    <ol>
        <li>Select <strong>Both</strong> in the "Search in" radio buttons</li>
        <li>Two search fields appear:
            <ul>
                <li><strong>First field</strong>: Pattern to match in <em>target</em> text</li>
                <li><strong>Second field</strong>: Pattern to match in <em>source</em> text</li>
            </ul>
        </li>
        <li>Results show only segments where <strong>BOTH</strong> patterns match (AND logic)</li>
    </ol>

    <p><strong>Common Use Cases:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Use Case</th>
                <th>Source Pattern</th>
                <th>Target Pattern</th>
                <th>What It Finds</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Product name not preserved</td>
                <td><code>PRODUCTNAME</code></td>
                <td><code>^((?!PRODUCTNAME).)*$</code></td>
                <td>Source has product name, target doesn't</td>
            </tr>
            <tr>
                <td>Terminology check</td>
                <td><code>software</code></td>
                <td><code>^((?!programvare).)*$</code></td>
                <td>Source has "software", target missing "programvare"</td>
            </tr>
            <tr>
                <td>Variable consistency</td>
                <td><code>\{count\}</code></td>
                <td><code>\{count\}</code></td>
                <td>Both source and target must have {count}</td>
            </tr>
            <tr>
                <td>Missing translations</td>
                <td><code>.+</code></td>
                <td><code>^$</code></td>
                <td>Source has text, target is empty</td>
            </tr>
            <tr>
                <td>Date format conversion</td>
                <td><code>\d{4}-\d{2}-\d{2}</code></td>
                <td><code>\d{2}\.\d{2}\.\d{4}</code></td>
                <td>Source has YYYY-MM-DD, target has DD.MM.YYYY</td>
            </tr>
        </tbody>
    </table>

    <p><strong>ğŸ’¡ Tip:</strong> If you leave the source field empty when "Both" is selected, the same pattern will be used for both source and target (original behavior).</p>

    <h3>Tag Protection</h3>
    <p>When <strong>Protect Tags</strong> is enabled (recommended), the regex engine ensures that:</p>
    <ul>
        <li>XML tags are not modified by search/replace</li>
        <li>Tags are extracted before regex operation</li>
        <li>Tags are reinserted after replacement</li>
        <li>Tag structure remains valid</li>
    </ul>

    <hr>

    <h2 id="regex-guide">Regex Guide</h2>

    <h3>Basic Patterns</h3>
    <table>
        <thead>
            <tr>
                <th>Pattern</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>hello</code></td>
                <td>Literal text</td>
                <td>Matches "hello"</td>
            </tr>
            <tr>
                <td><code>.</code></td>
                <td>Any single character</td>
                <td><code>h.llo</code> matches "hello", "hallo"</td>
            </tr>
            <tr>
                <td><code>*</code></td>
                <td>Zero or more</td>
                <td><code>hel*o</code> matches "heo", "helo", "hello"</td>
            </tr>
            <tr>
                <td><code>+</code></td>
                <td>One or more</td>
                <td><code>hel+o</code> matches "helo", "hello"</td>
            </tr>
            <tr>
                <td><code>?</code></td>
                <td>Zero or one</td>
                <td><code>colou?r</code> matches "color", "colour"</td>
            </tr>
            <tr>
                <td><code>\d</code></td>
                <td>Any digit</td>
                <td><code>\d+</code> matches "123"</td>
            </tr>
            <tr>
                <td><code>\s</code></td>
                <td>Whitespace</td>
                <td><code>\s+</code> matches spaces, tabs</td>
            </tr>
            <tr>
                <td><code>\w</code></td>
                <td>Word character</td>
                <td><code>\w+</code> matches "hello"</td>
            </tr>
            <tr>
                <td><code>^</code></td>
                <td>Start of string</td>
                <td><code>^Hello</code> matches "Hello world"</td>
            </tr>
            <tr>
                <td><code>$</code></td>
                <td>End of string</td>
                <td><code>world$</code> matches "Hello world"</td>
            </tr>
            <tr>
                <td><code>[abc]</code></td>
                <td>Any of a, b, or c</td>
                <td><code>[aeiou]</code> matches any vowel</td>
            </tr>
            <tr>
                <td><code>\b</code></td>
                <td>Word boundary</td>
                <td><code>\bthe\b</code> matches "the" not "there"</td>
            </tr>
        </tbody>
    </table>

    <h3>Common Translation Use Cases</h3>

    <div class="example-box">
        <h4>Find Double Spaces</h4>
        <p><strong>Pattern:</strong> <code>\s{2,}</code></p>
        <p><strong>Replace:</strong> <code> </code> (single space)</p>
    </div>

    <div class="example-box">
        <h4>Remove Leading/Trailing Spaces</h4>
        <p><strong>Pattern:</strong> <code>^\s+|\s+$</code></p>
        <p><strong>Replace:</strong> <code></code> (empty)</p>
    </div>

    <div class="example-box">
        <h4>Convert Date Format (DD.MM.YYYY to YYYY-MM-DD)</h4>
        <p><strong>Pattern:</strong> <code>(\d{2})\.(\d{2})\.(\d{4})</code></p>
        <p><strong>Replace:</strong> <code>\3-\2-\1</code></p>
        <p><strong>Example:</strong></p>
        <p>Input: <code>24.12.2023</code><br>
        Output: <code>2023-12-24</code></p>
    </div>

    <div class="example-box">
        <h4>Normalize Norwegian Quotes</h4>
        <p><strong>Pattern:</strong> <code>"([^"]+)"</code></p>
        <p><strong>Replace:</strong> <code>Â«\1Â»</code></p>
        <p><strong>Example:</strong></p>
        <p>Input: <code>"Hello world"</code><br>
        Output: <code>Â«Hello worldÂ»</code></p>
    </div>

    <div class="example-box">
        <h4>Fix Common Typo</h4>
        <p><strong>Pattern:</strong> <code>\bteh\b</code></p>
        <p><strong>Replace:</strong> <code>the</code></p>
        <p><strong>Example:</strong></p>
        <p>Input: <code>I saw teh cat</code><br>
        Output: <code>I saw the cat</code></p>
    </div>

    <hr>

    <h2 id="pattern-library">Pattern Library</h2>

    <p>The tool includes a built-in library of common regex patterns for translation and localization tasks.</p>

    <h3>Accessing the Library</h3>
    <ol>
        <li>Click <strong>Insert â†’ Regex Library</strong> (or press <kbd>Cmd+L</kbd>)</li>
        <li>Browse patterns by category</li>
        <li>Click <strong>Use</strong> to insert pattern into search field</li>
    </ol>

    <h3>Categories</h3>
    <ul>
        <li><strong>Whitespace</strong>: Multiple spaces, leading/trailing spaces, space before punctuation</li>
        <li><strong>Punctuation</strong>: Double periods, double commas, misplaced punctuation</li>
        <li><strong>Typos</strong>: Common typos (tehâ†’the, recieveâ†’receive, etc.)</li>
        <li><strong>Norwegian</strong>: Norwegian-specific patterns (quotes, dates, numbers)</li>
        <li><strong>URLs & Emails</strong>: Find email addresses, URLs, domains</li>
        <li><strong>Tags & Markup</strong>: Find unmatched brackets, parentheses</li>
        <li><strong>Consistency</strong>: Ensure consistent terminology</li>
    </ul>

    <hr>

    <h2 id="batch-checks">Batch Checks & ICU Validation</h2>

    <p>The Batch Checks feature lets you run batch quality checks across your entire file using predefined profiles. Additionally, the tool provides automatic ICU MessageFormat validation with one-click error correction.</p>

    <h3>Running Batch Checks</h3>
    <ol>
        <li>Click <strong>Insert â†’ Batch Checks</strong> (or press <kbd>Cmd+K</kbd>)</li>
        <li>Select a profile from dropdown</li>
        <li>Click <strong>Run Checks</strong></li>
        <li>Review results in the panel</li>
        <li>Click on individual results to jump to segment</li>
    </ol>

    <h3>ICU Message Format Validation & Auto-Fix</h3>
    <p>The tool automatically validates ICU MessageFormat syntax in your translations. When errors are detected:</p>
    <ul>
        <li><strong>âš ï¸ Warning badge</strong> appears next to segments with ICU errors</li>
        <li><strong>Error details</strong> are shown in the editor panel when you select the segment</li>
        <li><strong>ğŸ”§ Fix button</strong> appears next to errors that can be automatically corrected</li>
        <li><strong>Preview</strong> of what the fix will do is shown below each Fix button</li>
    </ul>

    <p><strong>Common auto-fixable errors:</strong></p>
    <ul>
        <li>ICU keywords incorrectly translated (e.g., "flertall" â†’ "plural", "velg" â†’ "select")</li>
        <li>Category keywords incorrectly translated (e.g., "en" â†’ "one", "andre" â†’ "other")</li>
        <li>Missing braces ({ or })</li>
        <li>Missing "offset:" in plural expressions</li>
    </ul>

    <p><strong>How it works:</strong></p>
    <ul>
        <li>Click a <strong>ğŸ”§ Fix</strong> button to automatically correct that specific error</li>
        <li>The fix applies <strong>immediately</strong> to the editor - no need to close and reopen the segment</li>
        <li>For segments with multiple errors, fix them one by one by clicking each Fix button</li>
        <li>The error list updates automatically after each fix</li>
        <li>Works even when variable names differ between source and target (e.g., <code>{count, plural...}</code> in source, <code>{antall, flertall...}</code> in target)</li>
    </ul>

    <p><strong>Example:</strong><br>
    If source is: <code>{count, plural, one {# item} other {# items}}</code><br>
    And target is: <code>{antall, flertall, en {# element} andre {# elementer}}</code><br>
    The tool will detect and offer to auto-fix: "flertall" â†’ "plural", "en" â†’ "one", and "andre" â†’ "other".<br>
    <em>Note: Variable names (like "count" vs "antall") and hash (#) count mismatches must be fixed manually.</em></p>

    <hr>

    <h2 id="shortcuts">Keyboard Shortcuts</h2>

    <h3>File Operations</h3>
    <table>
        <tr>
            <td><kbd>Cmd+O</kbd></td>
            <td>Open XLIFF file</td>
        </tr>
        <tr>
            <td><kbd>Cmd+S</kbd></td>
            <td>Save current file</td>
        </tr>
        <tr>
            <td><kbd>Cmd+W</kbd></td>
            <td>Close file</td>
        </tr>
        <tr>
            <td><kbd>Cmd+Q</kbd></td>
            <td>Quit application</td>
        </tr>
    </table>

    <h3>Editing</h3>
    <table>
        <tr>
            <td><kbd>Cmd+F</kbd></td>
            <td>Focus search field</td>
        </tr>
        <tr>
            <td><kbd>Cmd+Z</kbd></td>
            <td>Undo changes</td>
        </tr>
        <tr>
            <td><kbd>Escape</kbd></td>
            <td>Close editor panel or dialog</td>
        </tr>
    </table>

    <h3>Navigation</h3>
    <table>
        <tr>
            <td><kbd>Cmd+â†‘</kbd></td>
            <td>Jump to first segment</td>
        </tr>
        <tr>
            <td><kbd>Cmd+â†“</kbd></td>
            <td>Jump to last segment</td>
        </tr>
        <tr>
            <td><kbd>Cmd+L</kbd></td>
            <td>Open Regex Library</td>
        </tr>
        <tr>
            <td><kbd>Cmd+K</kbd></td>
            <td>Open Batch Checks</td>
        </tr>
    </table>

    <h3>View</h3>
    <table>
        <tr>
            <td><kbd>Cmd+D</kbd></td>
            <td>Toggle dark mode</td>
        </tr>
        <tr>
            <td><kbd>Cmd+H</kbd></td>
            <td>Toggle hidden characters</td>
        </tr>
    </table>

    <hr>

    <h2 id="known-issues">Known Issues & Limitations</h2>

    <h3>Inline Tags Display</h3>
    <blockquote>
        <p><strong>Behavior:</strong> XLIFF inline tags (like <code>&lt;x/&gt;</code>, <code>&lt;bpt&gt;</code>, <code>&lt;ept&gt;</code>) are preserved and displayed in the UI.</p>
        <p><strong>SDLXLIFF Note:</strong> Internal formatting tags like <code>&lt;mrk&gt;</code> and <code>&lt;g&gt;</code> are automatically stripped from the display for clarity, but are preserved in the saved file.</p>
        <p><strong>What you see:</strong></p>
        <ul>
            <li>Content tags like <code>&lt;x id="1"/&gt;</code> are visible and editable</li>
            <li>Formatting wrappers like <code>&lt;mrk&gt;</code> are hidden from view</li>
            <li>All tags are preserved when saving, regardless of visibility</li>
        </ul>
        <p><strong>Best Practice:</strong></p>
        <ol>
            <li>Test regex operations on a few segments first</li>
            <li>Check that tags remain intact after replacements</li>
            <li>Re-import edited files into your CAT tool to verify tag integrity</li>
        </ol>
    </blockquote>

    <h3>Tag Visibility</h3>
    <p><strong>Issue:</strong> Tags like <code>&lt;x id="1"/&gt;</code>, <code>&lt;bpt&gt;</code>, <code>&lt;ept&gt;</code> are hidden in the interface.</p>
    <p><strong>Why:</strong> This is by design to improve readability. Showing long tag IDs would clutter the UI.</p>
    <p><strong>Future:</strong> Implement CAT-tool-style tag display ([1], [2], etc.) that are non-editable placeholders.</p>
    <p><strong>Workaround:</strong> Tags are preserved in the file structure even though not visible. They will not be corrupted during find/replace if "Protect Tags" is enabled.</p>

    <hr>

    <h2 id="troubleshooting">Troubleshooting</h2>

    <h3>File Won't Open</h3>
    <p><strong>Possible Causes:</strong></p>
    <ol>
        <li><strong>Unsupported format</strong>: Check file extension (must be .xliff, .xlf, .mxliff, .mqxliff, .sdlxliff)</li>
        <li><strong>Corrupted file</strong>: XML structure is malformed</li>
        <li><strong>Encoding issues</strong>: File is not UTF-8 encoded</li>
        <li><strong>Unsupported XLIFF variant</strong>: Rare XLIFF variant not yet supported</li>
    </ol>
    <p><strong>Solutions:</strong></p>
    <ul>
        <li>Verify file extension is correct</li>
        <li>Open file in text editor to check XML structure</li>
        <li>Convert file to UTF-8 encoding</li>
        <li>Try exporting a fresh copy from your CAT tool</li>
        <li>Send sample file to HÃ¥vard for investigation</li>
    </ul>

    <h3>Replace Not Working as Expected</h3>
    <p><strong>Possible Causes:</strong></p>
    <ol>
        <li><strong>Regex syntax error</strong>: Pattern is invalid</li>
        <li><strong>Tag protection</strong>: Tags are blocking matches</li>
        <li><strong>Case sensitivity</strong>: Search is case-sensitive but shouldn't be (or vice versa)</li>
        <li><strong>Wrong search scope</strong>: Searching in Source instead of Target</li>
    </ol>
    <p><strong>Solutions:</strong></p>
    <ul>
        <li>Test regex pattern in online regex tester (e.g., regex101.com)</li>
        <li>Disable "Protect Tags" if you want to match inside tags (not recommended)</li>
        <li>Check "Case Sensitive" checkbox setting</li>
        <li>Verify "Search in" is set to correct scope (Target/Source/Both)</li>
    </ul>

    <hr>

    <h2 id="faq">FAQ</h2>

    <h3>Why can't I see tags?</h3>
    <p>Tags like <code>&lt;x id="1"/&gt;</code>, <code>&lt;bx/&gt;</code>, <code>&lt;ept&gt;</code> are intentionally hidden in the UI to improve readability. They clutter the interface and make segments hard to read. However, <strong>tags are fully preserved</strong> in the XML structure and will not be corrupted during editing.</p>

    <h3>Is my original file safe?</h3>
    <p>Yes. The tool creates automatic backups in <code>.backups/</code> folder before saving any changes. You can restore from backup at any time.</p>
    <p><strong>Best practice:</strong> Keep your original files in version control or separate backup location.</p>

    <h3>Can I use this with my CAT tool?</h3>
    <p>The tool is designed to work alongside CAT tools, not replace them. You can:</p>
    <ol>
        <li>Export XLIFF from your CAT tool</li>
        <li>Open in XLIFF RegEx Tool</li>
        <li>Perform batch regex operations</li>
        <li>Save the file</li>
        <li>Import back into your CAT tool</li>
    </ol>
    <p><strong>Tested with:</strong></p>
    <ul>
        <li>memoQ (MQXLIFF) âœ…</li>
        <li>SDL Trados Studio (SDLXLIFF) âœ…</li>
        <li>Phrase (MXLIFF) âœ…</li>
    </ul>

    <h3>What happens if my regex is wrong?</h3>
    <p>If you run a replace operation with incorrect regex:</p>
    <ol>
        <li>Changes are only applied in-memory (not saved to disk yet)</li>
        <li>You can <strong>Undo Changes</strong> (Edit â†’ Undo) to revert</li>
        <li>If you saved already, you can <strong>Restore Backup</strong></li>
    </ol>
    <p><strong>Best practice:</strong></p>
    <ul>
        <li>Test regex on a copy of the file first</li>
        <li>Use "Search" to preview matches before replacing</li>
        <li>Check a few segments manually after replace</li>
    </ul>

    <h3>Can I use backreferences?</h3>
    <p>Yes! Backreferences work in the "Replace with" field.</p>
    <p><strong>Syntax:</strong> <code>\1</code>, <code>\2</code>, <code>\3</code>, etc.</p>
    <div class="example-box">
        <p><strong>Example:</strong></p>
        <p>Search: <code>(\d{2})\.(\d{2})\.(\d{4})</code><br>
        Replace: <code>\3-\2-\1</code></p>
    </div>

    <h3>How do I report a bug?</h3>
    <p>Contact HÃ¥vard directly:</p>
    <ul>
        <li>Provide a description of the issue</li>
        <li>Include steps to reproduce</li>
        <li>Attach sample file if possible (or a simplified/anonymized version)</li>
    </ul>
    <p>This is beta software shared between colleagues, not commercial software, so there's no formal support ticket system.</p>

    <h3>How do updates work?</h3>
    <p>The application can automatically check for updates when connected to the internet:</p>
    <ul>
        <li><strong>Automatic check:</strong> The app checks for updates 3 seconds after startup</li>
        <li><strong>Manual check:</strong> Go to <strong>Help â†’ Check for Updates...</strong></li>
        <li><strong>Installing updates:</strong> If an update is available, click "Install Now" to download and install</li>
        <li><strong>Restart required:</strong> The app will automatically restart after installing the update</li>
    </ul>
    <div class="note-box" style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; margin: 1rem 0;">
        <p><strong>Note:</strong> Auto-updates require an internet connection and may not be available for all distribution methods. If you can't check for updates, you'll need to manually install new versions when they become available.</p>
    </div>

    <hr>

    <h2>Tips & Best Practices</h2>

    <h3>Before Running Replace</h3>
    <ul>
        <li>âœ… <strong>Test your regex</strong> in online regex tester first</li>
        <li>âœ… <strong>Use "Search"</strong> to preview matches (yellow highlights)</li>
        <li>âœ… <strong>Check a few segments</strong> manually to ensure matches are correct</li>
        <li>âœ… <strong>Enable "Protect Tags"</strong> to avoid corrupting XML tags</li>
        <li>âœ… <strong>Make a backup</strong> of your file (automatic, but verify <code>.backups/</code> folder exists)</li>
    </ul>

    <h3>After Running Replace</h3>
    <ul>
        <li>âœ… <strong>Review changed segments</strong> (blue highlighting shows edited rows)</li>
        <li>âœ… <strong>Click through a few segments</strong> to verify changes are correct</li>
        <li>âœ… <strong>Save the file</strong> (<kbd>Cmd+S</kbd>)</li>
        <li>âœ… <strong>Test in your CAT tool</strong> to ensure file still opens correctly</li>
    </ul>

    <hr>

    <footer style="margin-top: 3rem; padding-top: 2rem; border-top: 2px solid var(--border-color); text-align: center; color: #6b7280;">
        <p><strong>XLIFF RegEx Tool</strong> - Version 0.4.3 (Beta)</p>
        <p>Â© 2026 HÃ¥vard NÃ¸rjordet</p>
        <p style="font-size: 0.9em; margin-top: 1rem;">Last updated: 2026-02-02</p>
    </footer>
</body>
</html>
